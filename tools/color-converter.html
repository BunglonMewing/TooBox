<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Converter - TooBox</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4361ee',
                        secondary: '#3a0ca3',
                        accent: '#f72585',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-100 font-sans flex flex-col min-h-screen">

    <!-- Header -->
    <header class="bg-gradient-to-r from-primary to-secondary text-white p-4 sticky top-0 z-50 shadow-md">
        <div class="container mx-auto flex justify-between items-center">
            <a href="../index.html" class="flex items-center gap-2">
                <i class="fas fa-toolbox text-accent text-2xl"></i>
                <span class="text-2xl font-bold">TooBox</span>
            </a>
            <a href="../index.html" class="text-white hover:text-accent transition-colors"><i class="fas fa-home mr-2"></i>Kembali ke Beranda</a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-6 py-12">
        <div class="bg-white max-w-4xl mx-auto rounded-xl shadow-lg p-8">
            <h1 class="text-3xl font-bold text-center text-secondary mb-2">Color Converter</h1>
            <p class="text-center text-gray-500 mb-8">Konversi antara format warna HEX, RGB, dan HSL.</p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
                <!-- HEX -->
                <div>
                    <label for="hex-input" class="block text-sm font-medium text-gray-700">HEX</label>
                    <input type="text" id="hex-input" class="mt-1 block w-full p-2 border border-gray-300 rounded-md" placeholder="#ffffff">
                </div>
                <!-- RGB -->
                <div>
                    <label for="rgb-input" class="block text-sm font-medium text-gray-700">RGB</label>
                    <input type="text" id="rgb-input" class="mt-1 block w-full p-2 border border-gray-300 rounded-md" placeholder="255, 255, 255">
                </div>
                <!-- HSL -->
                <div>
                    <label for="hsl-input" class="block text-sm font-medium text-gray-700">HSL</label>
                    <input type="text" id="hsl-input" class="mt-1 block w-full p-2 border border-gray-300 rounded-md" placeholder="0, 0%, 100%">
                </div>
            </div>
            <div class="mt-6 h-24 w-full rounded-lg border border-gray-200" id="color-preview"></div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6">
        <div class="container mx-auto text-center text-gray-500">
            <p>&copy; 2025 TooBox - All rights reserved</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const hexInput = document.getElementById('hex-input');
            const rgbInput = document.getElementById('rgb-input');
            const hslInput = document.getElementById('hsl-input');
            const colorPreview = document.getElementById('color-preview');

            hexInput.addEventListener('input', (e) => {
                const hex = e.target.value;
                if (/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(hex)) {
                    const rgb = hexToRgb(hex);
                    const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
                    rgbInput.value = `${rgb.r}, ${rgb.g}, ${rgb.b}`;
                    hslInput.value = `${hsl.h}, ${hsl.s}%, ${hsl.l}%`;
                    updatePreview(hex);
                }
            });

            rgbInput.addEventListener('input', (e) => {
                const rgbStr = e.target.value;
                const parts = rgbStr.split(',').map(s => parseInt(s.trim(), 10));
                if (parts.length === 3 && parts.every(p => p >= 0 && p <= 255)) {
                    const [r, g, b] = parts;
                    const hex = rgbToHex(r, g, b);
                    const hsl = rgbToHsl(r, g, b);
                    hexInput.value = hex;
                    hslInput.value = `${hsl.h}, ${hsl.s}%, ${hsl.l}%`;
                    updatePreview(hex);
                }
            });

            hslInput.addEventListener('input', (e) => {
                const hslStr = e.target.value.replace(/%/g, '');
                const parts = hslStr.split(',').map(s => parseFloat(s.trim()));
                if (parts.length === 3) {
                     const [h, s, l] = parts;
                     if(h>=0 && h<=360 && s>=0 && s<=100 && l>=0 && l<=100){
                        const rgb = hslToRgb(h, s, l);
                        const hex = rgbToHex(rgb.r, rgb.g, rgb.b);
                        hexInput.value = hex;
                        rgbInput.value = `${rgb.r}, ${rgb.g}, ${rgb.b}`;
                        updatePreview(hex);
                     }
                }
            });

            function updatePreview(color) {
                colorPreview.style.backgroundColor = color;
            }

            // Conversion Functions
            function hexToRgb(hex) {
                let r = 0, g = 0, b = 0;
                if (hex.length == 4) {
                    r = "0x" + hex[1] + hex[1];
                    g = "0x" + hex[2] + hex[2];
                    b = "0x" + hex[3] + hex[3];
                } else if (hex.length == 7) {
                    r = "0x" + hex[1] + hex[2];
                    g = "0x" + hex[3] + hex[4];
                    b = "0x" + hex[5] + hex[6];
                }
                return { r: +r, g: +g, b: +b };
            }

            function rgbToHex(r, g, b) {
                return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase();
            }

            function rgbToHsl(r, g, b) {
                r /= 255; g /= 255; b /= 255;
                let max = Math.max(r, g, b), min = Math.min(r, g, b);
                let h, s, l = (max + min) / 2;
                if (max == min) {
                    h = s = 0;
                } else {
                    let d = max - min;
                    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                    switch (max) {
                        case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                        case g: h = (b - r) / d + 2; break;
                        case b: h = (r - g) / d + 4; break;
                    }
                    h /= 6;
                }
                return { h: Math.round(h * 360), s: Math.round(s * 100), l: Math.round(l * 100) };
            }

            function hslToRgb(h, s, l) {
                h /= 360; s /= 100; l /= 100;
                let r, g, b;
                if (s === 0) {
                    r = g = b = l;
                } else {
                    const hue2rgb = (p, q, t) => {
                        if (t < 0) t += 1;
                        if (t > 1) t -= 1;
                        if (t < 1 / 6) return p + (q - p) * 6 * t;
                        if (t < 1 / 2) return q;
                        if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
                        return p;
                    };
                    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                    const p = 2 * l - q;
                    r = hue2rgb(p, q, h + 1 / 3);
                    g = hue2rgb(p, q, h);
                    b = hue2rgb(p, q, h - 1 / 3);
                }
                return { r: Math.round(r * 255), g: Math.round(g * 255), b: Math.round(b * 255) };
            }
        });
    </script>

</body>
</html>
